<application>

    <name>On The Fly - NO SFM - GIE</name>
    <dependencies>
    </dependencies>

    <module>
        <name>yarpdev</name>
        <parameters>--device speech --lingware--context speech --default-language en-GB --pitch 80 --speed 100</parameters>
        <node>cer-face</node>
    </module>

    <module>
        <name>yarpdev</name>
        <parameters>--device faceDispalyServer</parameters>
        <node>cer-face</node>
    </module>

    <module>
        <name>yarpdev</name>
        <parameters>--device OpenNI2DeviceServer</parameters>
        <node>cer-torso</node>
    </module>

    <module>
        <name>textImage</name>
        <parameters>--scroll_speed 80</parameters>
        <node>cer-console-linux</node>
    </module>

    <module>
        <name>iSpeak</name>
        <parameters>--package speech-dev</parameters>
        <node>cer-face</node>
    </module>

    <module>
        <name>speechRecognizer</name>
        <parameters></parameters>
        <node>cer-console-windows</node>
    </module>

    <module>
        <name>dispBlobber</name>
        <parameters>--imW 320 --imH 240 --bufferSize 1 --minBlobSize 300 --backgroundThresh 100  --imageThreshRatioLow 100 --imageThreshRatioHigh  100 </parameters>
        <node>cer-torso</node>
    </module>

    <module>
        <name>managerOnTheFly --human_time_training 15 --skip_frames 5</name>
        <node>cer-torso</node>
    </module>

    <module>
        <name>GIECoder --from GIECoder_googlenet.ini</name>
        <node>cer-torso</node>
    </module>

    <module>
        <name>linearClassifierModule</name>
        <node>cer-torso</node>
    </module>

    <module>
        <name>cer_gaze-controller</name>
        <parameters>--cameras::context cameraCalibration --cameras::file cerEyes_320x240.ini</parameters>
        <node>cer-base</node>
    </module>

    <module>
        <name>onTheFlyRec_gaze.lua</name>
        <parameters>--track-blob --flip --w 320 --h 240</parameters>
        <deployer>lua</deployer>
        <node>cer-console-linux</node>
        <dependencies>
            <port timeout="10">/cer_gaze-controller/state:o</port>
            <port timeout="10">/cer_gaze-controller/target:i</port>
            <port timeout="10">/cer_gaze-controller/rpc</port>
        </dependencies>
    </module>

    <module>
        <name>onTheFlyRec_main.lua</name>
        <parameters></parameters>
        <deployer>lua</deployer>
        <node>cer-torso</node>
    </module>

    <module>
        <name>yarpview</name>
        <parameters>--name /onTheFlyRecognition/view --x 1300</parameters>
        <node>cer-console-windows</node>
    </module>

    <module>
        <name>yarpview</name>
        <parameters>--name /onTheFlyRecognition/confidence --x 900</parameters>
        <node>cer-console-windows</node>
    </module>

    <module>
        <name>yarpview</name>
        <parameters>--name /dispBlobber/optViewer --x 500 </parameters>
        <node>cer-console-windows</node>
    </module>

    <module>
        <name>yarpview</name>
        <parameters>--name /dispViewer --x 100 </parameters>
        <node>cer-console-windows</node>
    </module>

    <connection>
        <from>/OpenNI2/depthFrame_char:o</from>
        <to>/dispBlobber/img:i</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/OpenNI2/imageFrame:o</from>
        <to>/onTheFlyRecognition/img:i</to>
        <protocol>mjpeg</protocol>
    </connection>

    <connection>
        <from>/dispBlobber/blobs/left:o</from>
        <to>/onTheFlyRecognition/blobs:i</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/dispBlobber/roi/left:o</from>
        <to>/onTheFlyRecognition/roi:i</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRecognition/crop:o</from>
        <to>/GIECoder/img:i</to>
        <protocol>mjpeg</protocol>
    </connection>

    <connection>
        <from>/GIECoder/code:o</from>
        <to>/linearClassifier/features:i</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/linearClassifier/scores:o</from>
        <to>/onTheFlyRecognition/scores:i</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRecognition/classifier:io</from>
        <to>/linearClassifier/rpc</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRecognition/show:o</from>
        <to>/onTheFlyRecognition/view</to>
        <protocol>mjpeg</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRecognition/confidence:o</from>
        <to>/onTheFlyRecognition/confidence</to>
        <protocol>mjpeg</protocol>
    </connection>

    <connection>
        <from>/OpenNI2/depthFrame_char:o</from>
        <to>/dispViewer</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/dispBlobber/opt:o</from>
        <to>/dispBlobber/optViewer</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRecognition/speech:o</from>
        <to>/textImage/txt:i</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRec/gaze/tx</from>
        <to>/cer_gaze-controller/target:i</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/onTheFlyRec/gaze/rpc</from>
        <to>/cer_gaze-controller/rpc</to>
        <protocol>tcp</protocol>
    </connection>

    <connection>
        <from>/cer_gaze-controller/state:o</from>
        <to>/onTheFlyRec/gaze/rx</to>
        <protocol>udp</protocol>
    </connection>

    <connection>
        <from>/dispBlobber/blobs/left:o</from>
        <to>/onTheFlyRec/gaze/blob</to>
        <protocol>udp</protocol>
    </connection>

</application>
